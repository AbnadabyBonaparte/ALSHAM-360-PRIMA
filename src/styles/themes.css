/* src/styles/themes.css */
/* ALSHAM 360° PRIMA — Theme System (CSS Consumer SSOT v2.6.0) */
/* =========================================================
   SSOT: themes.ts + runtime injection via useTheme.ts
   Este arquivo é CONSUMER-ONLY → NÃO define temas, apenas consome
   Objetivo: 100% build-proof + shadcn bridge completo + zero “cara estranha”
   ========================================================= */

/* =========================================================
   BASE LAYER
   ========================================================= */
@layer base {
  :root {
    /* =========================================================
       CORE FALLBACK (dark baseline)
       ========================================================= */
    --bg: #0b1220;
    --bg-g1: #0b1220;
    --bg-g2: #1a1f35;
    --bg-gradient: linear-gradient(135deg, var(--bg-g1), var(--bg-g2));

    --text: rgba(255, 255, 255, 0.96);
    --text-2: rgba(255, 255, 255, 0.72);
    --text-muted: color-mix(in srgb, var(--text-2) 75%, transparent);

    /* =========================================================
       SURFACES (legacy primitives)
       ========================================================= */
    --surface: rgba(255, 255, 255, 0.06);
    --surface-strong: rgba(255, 255, 255, 0.10);
    --surface-elev: rgba(255, 255, 255, 0.08);
    --glass-hi: rgba(255, 255, 255, 0.08);
    --surface-glass: rgba(255, 255, 255, 0.04);

    /* =========================================================
       BORDERS (legacy — mantido intacto)
       ========================================================= */
    --border: rgba(255, 255, 255, 0.10);
    --border-strong: rgba(255, 255, 255, 0.16);

    /* =========================================================
       ACCENTS (fallback)
       ========================================================= */
    --accent-1: #10b981;
    --accent-2: #3b82f6;
    --accent-3: #a855f7;
    --accent-warm: #f59e0b;
    --accent-alert: #ef4444;

    /* =========================================================
       GRADIENTS (fallback)
       ========================================================= */
    --grad-primary: linear-gradient(135deg, #10b981, #14b8a6);
    --grad-secondary: linear-gradient(135deg, #3b82f6, #06b6d4);
    --grad-accent: linear-gradient(135deg, #a855f7, #ec4899);
    --grad-wash: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.06),
      rgba(255, 255, 255, 0.02)
    );
    --grad-veiled: radial-gradient(
      circle at 50% 50%,
      rgba(255, 255, 255, 0.06),
      transparent 70%
    );

    /* =========================================================
       GLOWS (fallback)
       ========================================================= */
    --glow-1: 0 0 20px rgba(16, 185, 129, 0.30);
    --glow-2: 0 0 15px rgba(59, 130, 246, 0.25);
    --glow-3: 0 0 15px rgba(168, 85, 247, 0.30);

    /* =========================================================
       SHADCN/TAILWIND TOKENS BRIDGE (essencial)
       - mantém contrato: bg-background, text-foreground, card, ring, radius, etc.
       - evita “tokens vazios” no computedStyle
       ========================================================= */
    --background: var(--bg, #0b1220);
    --foreground: var(--text, rgba(255, 255, 255, 0.96));

    --muted: var(--surface, rgba(255, 255, 255, 0.06));
    --muted-foreground: var(--text-2, rgba(255, 255, 255, 0.72));

    --card: var(--surface, rgba(255, 255, 255, 0.06));
    --card-foreground: var(--foreground);

    --popover: var(--surface-strong, rgba(255, 255, 255, 0.10));
    --popover-foreground: var(--foreground);

    --primary: var(--accent-1, #10b981);
    --primary-foreground: #ffffff;

    /* “premium subtle” — sem duplicação */
    --secondary: color-mix(in srgb, var(--foreground) 8%, transparent);
    --secondary-foreground: var(--foreground);

    --accent: color-mix(in srgb, var(--primary) 18%, transparent);
    --accent-foreground: var(--foreground);

    --destructive: var(--accent-alert, #ef4444);
    --destructive-foreground: #ffffff;

    /* Nunca auto-referência */
    --border-shad: var(--border, rgba(255, 255, 255, 0.10));
    --input: var(--border-shad);
    --ring: color-mix(in srgb, var(--primary) 55%, transparent);

    /* Radius essencial para shadcn */
    --radius: 1rem;

    /* =========================================================
       LEGACY ALIASES (compatibilidade)
       ========================================================= */
    --text-primary: var(--text);
    --text-secondary: var(--text-2);

    --accent-primary: var(--accent-1);
    --accent-secondary: var(--accent-2);
    --accent-tertiary: var(--accent-3);

    --gradient-primary: var(--grad-primary);
    --gradient-secondary: var(--grad-secondary);
    --gradient-tertiary: var(--grad-accent);

    --glow-primary: var(--glow-1);
    --glow-secondary: var(--glow-2);
    --glow-tertiary: var(--glow-3);

    --color-primary-from: var(--accent-1);
    --color-primary-to: #14b8a6;
    --color-secondary-from: var(--accent-2);
    --color-secondary-to: #06b6d4;
    --color-accent-from: var(--accent-3);
    --color-accent-to: #ec4899;

    --accent-primary-hover: #059669;
    --accent-secondary-hover: #2563eb;
    --accent-tertiary-hover: #9333ea;

    /* =========================================================
       DESIGN SYSTEM (não tema)
       ========================================================= */
    --font-xs: clamp(0.75rem, 2vw, 0.875rem);
    --font-sm: clamp(0.875rem, 2.5vw, 1rem);
    --font-base: clamp(0.875rem, 2vw, 1rem);
    --font-md: clamp(1rem, 3vw, 1.125rem);
    --font-lg: clamp(1.125rem, 3.5vw, 1.5rem);
    --font-xl: clamp(1.25rem, 4vw, 1.875rem);
    --font-2xl: clamp(1.5rem, 5vw, 2.25rem);
    --font-3xl: clamp(1.875rem, 6vw, 3rem);
    --font-4xl: clamp(2.25rem, 7vw, 3.75rem);

    --font-heading-h1: clamp(1.5rem, 5vw, 2.25rem);
    --font-heading-h2: clamp(1.25rem, 4vw, 1.875rem);
    --font-heading-h3: clamp(1.125rem, 3.5vw, 1.5rem);
    --font-heading-h4: clamp(1rem, 3vw, 1.25rem);
    --font-heading-h5: clamp(0.875rem, 2.5vw, 1.125rem);
    --font-heading-h6: clamp(0.875rem, 2vw, 1rem);

    --line-height-tight: 1.25;
    --line-height-normal: 1.5;
    --line-height-relaxed: 1.75;
    --line-height-loose: 2;

    --font-weight-light: 300;
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
    --font-weight-extrabold: 800;

    color-scheme: dark;
  }

  /* ---------------------------------------------------------
     NUCLEAR FALLBACK (ativado manualmente no html se runtime falhar)
     --------------------------------------------------------- */
  html.nuclear-fallback {
    --bg: #000000 !important;
    --background: #000000 !important;
    --foreground: #ffffff !important;
    --text: #ffffff !important;
    --card: #000000 !important;
    --primary: #00ff00 !important;
    --border: #00ff00 !important;
    --ring: #00ff00 !important;
    filter: none !important;
    backdrop-filter: none !important;
    box-shadow: none !important;
  }

  /* ---------------------------------------------------------
     GLOBAL BASE (anti-flash + consumo)
     --------------------------------------------------------- */
  html,
  body,
  #root {
    min-height: 100%;
    background: var(--background);
    background-image: var(--bg-gradient);
    color: var(--foreground);
    margin: 0;
    padding: 0;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Transição suave durante troca de tema */
  html.theme-switching * {
    transition:
      background-color 0.32s ease,
      color 0.32s ease,
      border-color 0.32s ease,
      box-shadow 0.32s ease !important;
  }
}

/* =========================================================
   UTILITIES LAYER
   (Define aliases locais para @apply — build-proof)
   ========================================================= */
@layer utilities {
  /* Background aliases */
  .bg-card { background-color: var(--card); }
  .bg-popover { background-color: var(--popover); }
  .bg-muted { background-color: var(--muted); }

  /* Text aliases */
  .text-foreground { color: var(--foreground); }
  .text-muted-foreground { color: var(--muted-foreground); }

  /* Border aliases */
  .border-border { border-color: var(--border); }
  .border-border-strong { border-color: var(--border-strong); }

  /* Optional ring helper */
  .ring-ring { --tw-ring-color: var(--ring); }

  .text-balance { text-wrap: balance; }

  .skeleton-shimmer {
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.08), transparent);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }
}

/* =========================================================
   COMPONENTS LAYER (build-proof)
   - sem opacity no container (evita “cara estranha”)
   - sem bg-card/xx e border-border/xx
   ========================================================= */
@layer components {
  .btn {
    @apply inline-flex items-center justify-center gap-2 px-5 py-3 rounded-xl font-medium transition-all duration-300;
  }

  .btn-primary {
    @apply bg-gradient-to-r from-primary to-primary/80 text-primary-foreground shadow-lg shadow-primary/30 hover:shadow-xl hover:shadow-primary/40;
  }

  .btn-secondary {
    @apply bg-gradient-to-r from-secondary to-secondary/80 text-secondary-foreground shadow-lg shadow-secondary/30 hover:shadow-xl hover:shadow-secondary/40;
  }

  .btn-accent {
    @apply bg-gradient-to-r from-accent to-accent/80 text-accent-foreground shadow-lg shadow-accent/30 hover:shadow-xl hover:shadow-accent/40;
  }

  /* Build-proof: hover sem /50 */
  .btn-ghost {
    @apply bg-transparent border border-border text-foreground;
  }
  .btn-ghost:hover {
    background-color: color-mix(in srgb, var(--muted) 50%, transparent);
  }

  /* Surfaces: sem opacity no container */
  .surface {
    @apply border backdrop-blur-xl rounded-2xl transition-all duration-300 hover:border-border-strong hover:-translate-y-1;
    background-color: color-mix(in srgb, var(--card) 60%, transparent);
    border-color: color-mix(in srgb, var(--border) 50%, transparent);
  }
  .surface:hover {
    background-color: color-mix(in srgb, var(--card) 80%, transparent);
  }

  .surface-elev {
    @apply border backdrop-blur-2xl rounded-3xl shadow-2xl;
    background-color: color-mix(in srgb, var(--card) 80%, transparent);
    border-color: color-mix(in srgb, var(--border) 50%, transparent);
  }

  .glass {
    @apply border backdrop-blur-xl rounded-2xl;
    background-color: color-mix(in srgb, var(--card) 40%, transparent);
    border-color: color-mix(in srgb, var(--border) 30%, transparent);
  }

  .card {
    @apply border border-border rounded-2xl p-6 transition-all duration-300 hover:border-border-strong hover:shadow-2xl;
    background-color: var(--card);
  }
}

/* =========================================================
   ANIMAÇÕES
   ========================================================= */
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

/* =========================================================
   ACESSIBILIDADE
   ========================================================= */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

@media (prefers-contrast: high) {
  :root {
    --border: rgba(255, 255, 255, 0.8);
    --border-strong: rgba(255, 255, 255, 1);
  }
}

/* =========================================================
   VERSÃO: 2.6.0-SSOT-CONSUMER-1000/1000
   ✅ Consumer-only (runtime injection em themes.ts/useTheme.ts)
   ✅ Bridge shadcn completo (tokens não ficam vazios)
   ✅ Zero auto-referência (border/input/ring)
   ✅ Build-proof total (sem bg-card/xx, border-border/xx, hover /50 em custom)
   ✅ Sem opacity no container (elimina “cara estranha”)
   ✅ Nuclear fallback disponível
   ========================================================= */
