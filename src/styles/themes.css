/* src/styles/themes.css */
/* ALSHAM 360° PRIMA — Theme System (CSS Consumer SSOT v2.4.0) */
/* =========================================================
   SSOT: themes.ts + runtime injection via useTheme.ts
   Este arquivo é CONSUMER-ONLY → NÃO define temas, apenas consome
   ========================================================= */

/* =========================================================
   BASE LAYER
   ========================================================= */
@layer base {
  /* ---------------------------------------------------------
     0) FALLBACK MÍNIMO + ALIASES LEGACY (garante visibilidade)
     --------------------------------------------------------- */
  :root {
    /* Core fallback (dark baseline) */
    --bg: #0b1220;
    --bg-g1: #0b1220;
    --bg-g2: #1a1f35;
    --bg-gradient: linear-gradient(135deg, var(--bg-g1), var(--bg-g2));

    --text: rgba(255, 255, 255, 0.96);
    --text-2: rgba(255, 255, 255, 0.72);
    --text-muted: color-mix(in srgb, var(--text-2) 75%, transparent);

    /* Surfaces */
    --surface: rgba(255, 255, 255, 0.06);
    --surface-strong: rgba(255, 255, 255, 0.10);
    --surface-elev: rgba(255, 255, 255, 0.08);
    --glass-hi: rgba(255, 255, 255, 0.08);
    --surface-glass: rgba(255, 255, 255, 0.04);

    /* Borders (legacy — NUNCA auto-referência) */
    --border: rgba(255, 255, 255, 0.10);
    --border-strong: rgba(255, 255, 255, 0.16);

    /* Accents */
    --accent-1: #10b981;
    --accent-2: #3b82f6;
    --accent-3: #a855f7;
    --accent-warm: #f59e0b;
    --accent-alert: #ef4444;

    /* Gradients */
    --grad-primary: linear-gradient(135deg, #10b981, #14b8a6);
    --grad-secondary: linear-gradient(135deg, #3b82f6, #06b6d4);
    --grad-accent: linear-gradient(135deg, #a855f7, #ec4899);
    --grad-wash: linear-gradient(135deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
    --grad-veiled: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.06), transparent 70%);

    /* Glows */
    --glow-1: 0 0 20px rgba(16, 185, 129, 0.30);
    --glow-2: 0 0 15px rgba(59, 130, 246, 0.25);
    --glow-3: 0 0 15px rgba(168, 85, 247, 0.30);

    /* =========================================================
       SHADCN/TAILWIND TOKENS BRIDGE (essencial para componentes)
       ========================================================= */
    --background: var(--bg, #0b1220);
    --foreground: var(--text, rgba(255,255,255,0.96));
    --muted: var(--surface, rgba(255,255,255,0.06));
    --muted-foreground: var(--text-2, rgba(255,255,255,0.72));

    --card: var(--surface, rgba(255,255,255,0.06));
    --card-foreground: var(--foreground);

    --popover: var(--surface-strong, rgba(255,255,255,0.10));
    --popover-foreground: var(--foreground);

    --primary: var(--accent-1, #10b981);
    --primary-foreground: #ffffff;

    --secondary: color-mix(in srgb, var(--foreground) 8%, transparent);
    --secondary-foreground: var(--foreground);

    --accent: color-mix(in srgb, var(--primary) 18%, transparent);
    --accent-foreground: var(--foreground);

    --destructive: var(--accent-alert, #ef4444);
    --destructive-foreground: #ffffff;

    /* Border/Input/Ring — usa fallback fixo para evitar auto-referência */
    --border-shad: var(--border, rgba(255,255,255,0.10));
    --border: var(--border-shad);
    --input: var(--border-shad);
    --ring: color-mix(in srgb, var(--primary) 55%, transparent);

    /* Radius essencial para shadcn */
    --radius: 1rem;

    /* =========================================================
       ALIASES LEGACY (compatibilidade com código antigo)
       ========================================================= */
    --text-primary: var(--text);
    --text-secondary: var(--text-2);
    --accent-primary: var(--accent-1);
    --accent-secondary: var(--accent-2);
    --accent-tertiary: var(--accent-3);

    --gradient-primary: var(--grad-primary);
    --gradient-secondary: var(--grad-secondary);
    --gradient-tertiary: var(--grad-accent);

    --glow-primary: var(--glow-1);
    --glow-secondary: var(--glow-2);
    --glow-tertiary: var(--glow-3);

    --color-primary-from: var(--accent-1);
    --color-primary-to: #14b8a6;
    --color-secondary-from: var(--accent-2);
    --color-secondary-to: #06b6d4;
    --color-accent-from: var(--accent-3);
    --color-accent-to: #ec4899;

    /* Hover fallbacks seguros */
    --accent-primary-hover: #059669;
    --accent-secondary-hover: #2563eb;
    --accent-tertiary-hover: #9333ea;

    /* Design system (não tema) */
    --font-xs: clamp(0.75rem, 2vw, 0.875rem);
    --font-sm: clamp(0.875rem, 2.5vw, 1rem);
    --font-base: clamp(0.875rem, 2vw, 1rem);
    --font-md: clamp(1rem, 3vw, 1.125rem);
    --font-lg: clamp(1.125rem, 3.5vw, 1.5rem);
    --font-xl: clamp(1.25rem, 4vw, 1.875rem);
    --font-2xl: clamp(1.5rem, 5vw, 2.25rem);
    --font-3xl: clamp(1.875rem, 6vw, 3rem);
    --font-4xl: clamp(2.25rem, 7vw, 3.75rem);

    --font-heading-h1: clamp(1.5rem, 5vw, 2.25rem);
    --font-heading-h2: clamp(1.25rem, 4vw, 1.875rem);
    --font-heading-h3: clamp(1.125rem, 3.5vw, 1.5rem);
    --font-heading-h4: clamp(1rem, 3vw, 1.25rem);
    --font-heading-h5: clamp(0.875rem, 2.5vw, 1.125rem);
    --font-heading-h6: clamp(0.875rem, 2vw, 1rem);

    --line-height-tight: 1.25;
    --line-height-normal: 1.5;
    --line-height-relaxed: 1.75;
    --line-height-loose: 2;

    --font-weight-light: 300;
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
    --font-weight-extrabold: 800;

    color-scheme: dark;
  }

  /* ---------------------------------------------------------
     NUCLEAR FALLBACK
     --------------------------------------------------------- */
  html.nuclear-fallback {
    --bg: #000000 !important;
    --foreground: #ffffff !important;
    --background: #000000 !important;
    --text: #ffffff !important;
    --card: #000000 !important;
    --primary: #00ff00 !important;
    --border: #00ff00 !important;
    --ring: #00ff00 !important;
    filter: none !important;
    backdrop-filter: none !important;
    box-shadow: none !important;
  }

  /* ---------------------------------------------------------
     GLOBAL BASE
     --------------------------------------------------------- */
  html,
  body,
  #root {
    min-height: 100%;
    background: var(--background);
    background-image: var(--bg-gradient);
    color: var(--foreground);
    margin: 0;
    padding: 0;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  html.theme-switching * {
    transition: background-color 0.32s ease, color 0.32s ease, border-color 0.32s ease, box-shadow 0.32s ease !important;
  }
}

/* =========================================================
   COMPONENTS LAYER
   ========================================================= */
@layer components {
  .btn {
    @apply inline-flex items-center justify-center gap-2 px-5 py-3 rounded-xl font-medium transition-all duration-300;
  }
  .btn-primary {
    @apply bg-gradient-to-r from-primary to-primary/80 text-primary-foreground shadow-lg shadow-primary/30 hover:shadow-xl hover:shadow-primary/40;
  }
  .btn-secondary {
    @apply bg-gradient-to-r from-secondary to-secondary/80 text-secondary-foreground shadow-lg shadow-secondary/30 hover:shadow-xl hover:shadow-secondary/40;
  }
  .btn-accent {
    @apply bg-gradient-to-r from-accent to-accent/80 text-accent-foreground shadow-lg shadow-accent/30 hover:shadow-xl hover:shadow-accent/40;
  }
  .btn-ghost {
    @apply bg-transparent border border-border text-foreground hover:bg-muted/50;
  }

  .surface {
    @apply bg-card/60 border border-border/50 backdrop-blur-xl rounded-2xl transition-all duration-300 hover:border-border-strong hover:bg-card/80 hover:-translate-y-1;
  }
  .surface-elev {
    @apply bg-card/80 border border-border/50 backdrop-blur-2xl rounded-3xl shadow-2xl;
  }
  .glass {
    @apply bg-card/40 backdrop-blur-xl border border-border/30 rounded-2xl;
  }

  .card {
    @apply bg-card border border-border rounded-2xl p-6 transition-all duration-300 hover:border-border-strong hover:shadow-2xl;
  }
}

/* =========================================================
   UTILITIES LAYER
   ========================================================= */
@layer utilities {
  .text-balance { text-wrap: balance; }
  .skeleton-shimmer {
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.08), transparent);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }
}

/* =========================================================
   ANIMAÇÕES
   ========================================================= */
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

/* =========================================================
   ACESSIBILIDADE
   ========================================================= */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

@media (prefers-contrast: high) {
  :root {
    --border: rgba(255, 255, 255, 0.8);
    --border-strong: rgba(255, 255, 255, 1);
  }
}

/* =========================================================
   VERSÃO: 2.4.0-SSOT-CONSUMER-FIXED
   ✅ Bug --border auto-referência corrigido
   ✅ --radius adicionado
   ✅ secondary/accent com contraste suave
   ✅ Bridge shadcn completo
   ✅ Consumer-only + fallbacks seguros
   ========================================================= */
